<div class="scene page page-mood">
  <div class="m-wrap card">
    <div class="m-head">
      <a class="back" routerLink="/home" aria-label="Back">â† Back</a>

      <div class="titlebox">
        <h1 class="m-title">Mood & Energy</h1>
        <p class="m-sub muted">Pick your current vibe âœ¨</p>
      </div>

      <button class="mini-save" type="button" (click)="save()" [disabled]="saving" aria-label="Save">
        {{ saving ? 'â€¦' : 'Save' }}
      </button>
    </div>

 
    <div class="section">
      <div class="sec-title">
        <h2>Mood</h2>
        <span class="chip">{{ moodLabel(selectedMood) }}</span>
      </div>

      <div class="grid mood-grid">
        <button type="button" class="tile" [class.active]="selectedMood==='happy'" (click)="selectMood('happy')">
          <span class="emoji">ğŸ˜Š</span><span class="name">Happy</span>
        </button>

        <button type="button" class="tile" [class.active]="selectedMood==='normal'" (click)="selectMood('normal')">
          <span class="emoji">ğŸ˜Œ</span><span class="name">Normal</span>
        </button>

        <button type="button" class="tile" [class.active]="selectedMood==='tired'" (click)="selectMood('tired')">
          <span class="emoji">ğŸ¥±</span><span class="name">Tired</span>
        </button>

        <button type="button" class="tile" [class.active]="selectedMood==='sad'" (click)="selectMood('sad')">
          <span class="emoji">ğŸ˜”</span><span class="name">Sad</span>
        </button>
      </div>
    </div>


    <div class="section mt16">
      <div class="sec-title">
        <h2>Energy</h2>
        <span class="chip">{{ energyLabel(selectedEnergy) }}</span>
      </div>

      <div class="grid energy-grid">
        <button type="button" class="tile energy" [class.active]="selectedEnergy==='LOW'" (click)="selectEnergy('LOW')">
          <span class="emoji">ğŸŸ¢</span>
          <span class="name">Low</span>
          <span class="desc muted">Light tasks</span>
        </button>

        <button type="button" class="tile energy" [class.active]="selectedEnergy==='MEDIUM'" (click)="selectEnergy('MEDIUM')">
          <span class="emoji">ğŸŸ£</span>
          <span class="name">Medium</span>
          <span class="desc muted">Balanced</span>
        </button>

        <button type="button" class="tile energy" [class.active]="selectedEnergy==='HIGH'" (click)="selectEnergy('HIGH')">
          <span class="emoji">ğŸ”µ</span>
          <span class="name">High</span>
          <span class="desc muted">Deep focus</span>
        </button>
      </div>
    </div>

    <div class="note card mt16">
      <div class="note-title">âœ¨ Smart tip</div>
      <div class="note-text muted">
        Your mood & energy can help sort tasks automatically (High / Medium / Low).
      </div>
    </div>

    <p class="err" *ngIf="error">{{ error }}</p>
  </div>


  <div class="toast" *ngIf="toastOpen" aria-live="polite">
    <div class="t-emoji">{{ toastEmoji }}</div>
    <div class="t-body">
      <div class="t-title">Saved âœ¨</div>
      <div class="t-text">{{ toastText }}</div>

      <div class="t-actions">
        <button type="button" class="t-btn" (click)="goHome()">Letâ€™s go</button>
        <button type="button" class="t-btn ghost" (click)="closeToast()">Close</button>
      </div>
    </div>
  </div>

  <div class="sparkles" aria-hidden="true">
    <span></span><span></span><span></span><span></span>
  </div>
</div>